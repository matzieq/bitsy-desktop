"use strict";(self.webpackChunkbitsy_docs=self.webpackChunkbitsy_docs||[]).push([[641],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var r=i.createContext({}),p=function(e){var t=i.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return i.createElement(r.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(n),c=a,k=m["".concat(r,".").concat(c)]||m[c]||u[c]||l;return n?i.createElement(k,o(o({ref:t},d),{},{components:n})):i.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<l;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4809:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var i=n(7462),a=(n(7294),n(3905));const l={},o="Bitsy System",s={unversionedId:"technical/system",id:"technical/system",title:"Bitsy System",description:"v0.2",source:"@site/docs/technical/system.md",sourceDirName:"technical",slug:"/technical/system",permalink:"/docs/technical/system",draft:!1,editUrl:"https://github.com/le-doux/bitsy/edit/main/docs/docs/technical/system.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Technical",permalink:"/docs/category/technical"},next:{title:"Glossary",permalink:"/docs/glossary"}},r={},p=[{value:"v0.2",id:"v02",level:2},{value:"About",id:"about",level:3},{value:"Specification",id:"specification",level:2},{value:"System Object",id:"system-object",level:3},{value:"Constants",id:"constants",level:3},{value:"Memory Blocks",id:"memory-blocks",level:4},{value:"Graphics Modes",id:"graphics-modes",level:4},{value:"Text Modes",id:"text-modes",level:4},{value:"Size",id:"size",level:4},{value:"Button Codes",id:"button-codes",level:4},{value:"Pulse Waves",id:"pulse-waves",level:4},{value:"IO (Input / Output)",id:"io-input--output",level:3},{value:"Graphics",id:"graphics",level:3},{value:"Sound",id:"sound",level:3},{value:"Events",id:"events",level:3}],d={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"bitsy-system"},"Bitsy System"),(0,a.kt)("h2",{id:"v02"},"v0.2"),(0,a.kt)("h3",{id:"about"},"About"),(0,a.kt)("p",null,"These APIs are the base layer on which the bitsy engine is built. When combined with a JavaScript intepreter, they define the system requirements for bitsy."),(0,a.kt)("p",null,"The web implementation of these APIs is found in ",(0,a.kt)("inlineCode",{parentName:"p"},"editor/script/system/system.js")," (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/le-doux/bitsy/blob/main/editor/script/system/system.js"},"source"),"). I've also written a standalone desktop implementation called ",(0,a.kt)("a",{parentName:"p",href:"https://ledoux.itch.io/bitsybox"},"bitsybox")," (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/le-doux/bitsybox"},"source"),")."),(0,a.kt)("p",null,"NOTE: Currently these are experimental and likely to change significantly from version to version - at least until they reach v1.0."),(0,a.kt)("h2",{id:"specification"},"Specification"),(0,a.kt)("h3",{id:"system-object"},"System Object"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy")),(0,a.kt)("p",null,"All of the functions and constants of the bitsy system are members of the ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy")," global object. This object represents the bitsy system and must be provided by the host system for the engine to run."),(0,a.kt)("h3",{id:"constants"},"Constants"),(0,a.kt)("p",null,"These constants are special values used by bitsy system functions."),(0,a.kt)("h4",{id:"memory-blocks"},"Memory Blocks"),(0,a.kt)("p",null,'Memory blocks are virtual locations in system memory used by certain functions to specify what memory they are changing. Currently the exact meaning of "memory block location" is not defined, so these constants should essentially be treated as arbitrary IDs.'),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.VIDEO")),(0,a.kt)("p",null,"Location of the main display memory for bitsy when accessing pixels individually (see ",(0,a.kt)("a",{parentName:"p",href:"#graphics-modes"},"Graphics Modes"),")."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.TEXTBOX")),(0,a.kt)("p",null,"Location of the text display memory for bitsy (where the textbox is drawn). Seperate memory is required since it may not share the same internal resolution as the main display."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.MAP1")),(0,a.kt)("p",null,"Location of the background tilemap."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.MAP2")),(0,a.kt)("p",null,"Location of the foreground tilemap."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.SOUND1")),(0,a.kt)("p",null,"Location of sound channel 1."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.SOUND2")),(0,a.kt)("p",null,"Location of sound channel 2."),(0,a.kt)("h4",{id:"graphics-modes"},"Graphics Modes"),(0,a.kt)("p",null,"There are two graphics modes for the main display."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.GFX_VIDEO")),(0,a.kt)("p",null,"In video mode, every pixel on the main display can be written to individually. This is used for screen transition effects."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.GFX_MAP")),(0,a.kt)("p",null,"In tilemap mode, instead of directly writing to pixels you write tile IDs into tilemap memory. This is used for normal gameplay."),(0,a.kt)("h4",{id:"text-modes"},"Text Modes"),(0,a.kt)("p",null,"There are two text display modes as well."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.TXT_HIREZ")),(0,a.kt)("p",null,"The internal resolution of the textbox display is 2x the main display. This is the default mode."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.TXT_LOREZ")),(0,a.kt)("p",null,"The internal resolution of the textbox display is ",(0,a.kt)("em",{parentName:"p"},"the same")," as the main display. Games can request this display mode via settings."),(0,a.kt)("h4",{id:"size"},"Size"),(0,a.kt)("p",null,"Constant size values."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.TILE_SIZE")),(0,a.kt)("p",null,"The size of tiles in pixels."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.MAP_SIZE")),(0,a.kt)("p",null,"The size of tilemaps in tiles."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.VIDEO_SIZE")),(0,a.kt)("p",null,"The size of the main display in pixels."),(0,a.kt)("h4",{id:"button-codes"},"Button Codes"),(0,a.kt)("p",null,"Bitsy has six gamepad buttons for input."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_UP")),(0,a.kt)("p",null,"Up arrow or W on keyboard, swipe up on touch screen, d-pad up on gamepad."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_DOWN")),(0,a.kt)("p",null,"Down arrow or S on keyboard, swipe down on touch screen, d-pad down on gamepad."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_LEFT")),(0,a.kt)("p",null,"Left arrow or A on keyboard, swipe left on touch screen, d-pad left on gamepad."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_RIGHT")," "),(0,a.kt)("p",null,"Right arrow or D on keyboard, swipe right on touch screen, d-pad right on gamepad."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_OK")),(0,a.kt)("p",null,'"Any key" on keyboard, tap on touch screen, face buttons on gamepad. (Used to advance dialog.)'),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.BTN_MENU")),(0,a.kt)("p",null,"Ctrl+R on keyboard, no touch control yet, start button on gamepad. (Restarts the game.)"),(0,a.kt)("h4",{id:"pulse-waves"},"Pulse Waves"),(0,a.kt)("p",null,"Bitsy's virtual soundchip supports three different pulse waves for audio output."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.PULSE_1_8")),(0,a.kt)("p",null,"Pulse wave with 1/8 duty."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.PULSE_1_4")),(0,a.kt)("p",null,"Pulse wave with 1/4 duty."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.PULSE_1_2")),(0,a.kt)("p",null,"Pulse wave with 1/2 duty (aka square wave)."),(0,a.kt)("h3",{id:"io-input--output"},"IO (Input / Output)"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.log(message)")),(0,a.kt)("p",null,"Writes the string ",(0,a.kt)("inlineCode",{parentName:"p"},"message")," to the debug console."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.button(code)")),(0,a.kt)("p",null,"Returns ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," if the button referred to by ",(0,a.kt)("inlineCode",{parentName:"p"},"code")," is held down (see ",(0,a.kt)("a",{parentName:"p",href:"#button-codes"},"Button Codes"),"). Otherwise it returns ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.getGameData()")),(0,a.kt)("p",null,"Returns the game data as a string."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.getFontData()")),(0,a.kt)("p",null,"Returns the default font data as a string."),(0,a.kt)("h3",{id:"graphics"},"Graphics"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.graphicsMode(mode)")),(0,a.kt)("p",null,"Sets the current graphics display ",(0,a.kt)("inlineCode",{parentName:"p"},"mode")," (see ",(0,a.kt)("a",{parentName:"p",href:"#graphics-modes"},"Graphics Modes"),"), and also returns the current graphics mode. If no ",(0,a.kt)("inlineCode",{parentName:"p"},"mode")," input is given, just returns the current mode without changing it."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.textMode(mode)")),(0,a.kt)("p",null,"Sets the current text display ",(0,a.kt)("inlineCode",{parentName:"p"},"mode")," (see ",(0,a.kt)("a",{parentName:"p",href:"#text-modes"},"Text Modes"),"), and also returns the current text mode. If no ",(0,a.kt)("inlineCode",{parentName:"p"},"mode")," input is given, just returns the current mode without changing it."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.color(color, r, g, b)")),(0,a.kt)("p",null,"Sets the color in the system palette at index ",(0,a.kt)("inlineCode",{parentName:"p"},"color")," to a color defined by the color parameters ",(0,a.kt)("inlineCode",{parentName:"p"},"r")," (red), ",(0,a.kt)("inlineCode",{parentName:"p"},"g")," (green), and ",(0,a.kt)("inlineCode",{parentName:"p"},"b")," (blue). These values must be between 0 and 255. (For example, ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.color(2, 0, 0, 0)")," sets the color at index 2 to black and ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.color(2, 255, 255, 255)")," set the color at the same index to white.)"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.tile()")),(0,a.kt)("p",null,"Allocates a new tile and returns its memory block location."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.delete(tile)")),(0,a.kt)("p",null,"Deletes the tile at the specified memory block location."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.fill(block, value)")),(0,a.kt)("p",null,"Fills an entire memory ",(0,a.kt)("inlineCode",{parentName:"p"},"block")," with a number ",(0,a.kt)("inlineCode",{parentName:"p"},"value"),". Can be used to clear blocks such as video memory, tilemap memory, and tile memory."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.set(block, index, value)")),(0,a.kt)("p",null,"Sets the value at ",(0,a.kt)("inlineCode",{parentName:"p"},"index")," within a memory ",(0,a.kt)("inlineCode",{parentName:"p"},"block")," with a number ",(0,a.kt)("inlineCode",{parentName:"p"},"value"),"."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.textbox(visible, x, y, w, h)")),(0,a.kt)("p",null,"Updates the textbox display settings. If ",(0,a.kt)("inlineCode",{parentName:"p"},"visible")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," the textbox is rendered, otherwise it's hidden. The textbox's position (relative the main display's coordinate space) is defined by ",(0,a.kt)("inlineCode",{parentName:"p"},"x")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"y"),". And the size of the textbox (in its internal resolution) is defined by ",(0,a.kt)("inlineCode",{parentName:"p"},"w")," (width) and ",(0,a.kt)("inlineCode",{parentName:"p"},"h")," (height). Omitted parameters are unchanged (For example, you can just reveal the textbox without changing its position and size using ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.textbox(true)"),")."),(0,a.kt)("h3",{id:"sound"},"Sound"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.sound(channel, duration, frequency, volume, pulse)")),(0,a.kt)("p",null,"Updates all audio settings for one sound ",(0,a.kt)("inlineCode",{parentName:"p"},"channel")," (either ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.SOUND1")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.SOUND2"),"). The ",(0,a.kt)("inlineCode",{parentName:"p"},"duration")," is in milliseconds, ",(0,a.kt)("inlineCode",{parentName:"p"},"frequency")," is in decihertz (dHz), ",(0,a.kt)("inlineCode",{parentName:"p"},"volume")," must be between 0 and 15, and ",(0,a.kt)("inlineCode",{parentName:"p"},"pulse")," is one of the pulse wave constants (see ",(0,a.kt)("a",{parentName:"p",href:"#pulse-waves"},"Pulse Waves"),")."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.frequency(channel, frequency)")),(0,a.kt)("p",null,"Sets the ",(0,a.kt)("inlineCode",{parentName:"p"},"frequency")," for one sound ",(0,a.kt)("inlineCode",{parentName:"p"},"channel"),". Units are decihertz (dHz)."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.volume(channel, volume)")),(0,a.kt)("p",null,"Sets the ",(0,a.kt)("inlineCode",{parentName:"p"},"volume")," for one sound ",(0,a.kt)("inlineCode",{parentName:"p"},"channel"),". Volume must be between 0 and 15 (inclusive)."),(0,a.kt)("h3",{id:"events"},"Events"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bitsy.loop(fn)")),(0,a.kt)("p",null,"The system will call function ",(0,a.kt)("inlineCode",{parentName:"p"},"fn")," on every update loop. It will attempt to run at 60fps, but ",(0,a.kt)("inlineCode",{parentName:"p"},"fn")," will also receive an input parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"dt")," with the delta time since the previous loop (in milliseconds)."))}u.isMDXComponent=!0}}]);